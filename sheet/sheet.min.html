<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>.fill{background-color:#cd071e;color:#fff}.row.auto{width:auto}.col,.row{display:flex}.row{align-items:flex-end}.col.auto,.col.smol{width:3em;margin-right:.5em}.col.auto,.row{width:100%}.col{width:fit-content;block-size:fit-content;padding:.3em;border-bottom:solid .3em #cd071e;vertical-align:bottom}.field{background-color:#fff;border:0;width:100%}.approach{min-width:150%}.approach-container{width:7em;display:flex;justify-content:center;align-items:stretch;position:relative}.approach-label{position:absolute;bottom:2em;font-weight:700;color:#cd071e}</style>
    <style>.dropbtn{background-color:#cd071e;color:#fff;padding:.5em;font-size:1em;border:0;cursor:pointer;min-width:3em}.dropdown{position:absolute;display:inline-block;margin:auto;bottom:50%}.dropdown-content{display:none;position:absolute;box-shadow:0 8px 16px 0 rgba(0,0,0,.2);z-index:1;min-width:3em}.dropdown-content a{color:#fff;padding:.5em;text-decoration:none;display:block;text-align:center}.dropdown-content a:hover{background-color:#c71729}.dropdown:hover .dropdown-content{display:block}.dropdown-content,.dropdown:hover .dropbtn{background-color:#cd071e}</style>
</head>
<body>
<form id="sheet-form">
    <div>
        <div class="row">
            <div class="col fill">Имя</div>
            <div class="col auto"><input name="name" data-bind="value" class="field" type="text"/></div>
        </div>
        <br/>
        <div class="row">
            <div class="row">
                <div class="col fill">Происхождение</div>
                <div class="col auto"><input name="background" data-bind="value" class="field" type="text"/></div>
            </div>
            <div class="row">
                <div class="col fill">Класс</div>
                <div class="col auto"><input name="class" data-bind="value" class="field" type="text"/></div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="row">
                <div class="col fill">Организация</div>
                <div class="col auto"><input name="organization" data-bind="value" class="field" type="text"/></div>
            </div>
            <div class="row auto">
                <div class="row">
                    <div class="col fill">Ранг</div>
                    <div class="col smol"><input name="rank" data-bind="value" class="field" type="text"/></div>
                </div>
                <div class="row">
                    <div class="col fill">Слава</div>
                    <div class="col smol"><input name="fame" data-bind="value" class="field" type="text"/></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="approach-container">
            <svg width="100%" height="100%" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:10;" viewBox="0 0 1366 1366" class="approach"><g id="Layer-1"><path d="M0-231.097V0h-470.429v-231.097l63.316 63.424h343.689z" style="fill:#fff;fill-rule:nonzero;stroke:#b13425;stroke-width:18px" transform="translate(996.21 1156.03)scale(1.33333)"/><path d="m0 542.375-63.424-63.424V62.986L-.438 0h344.457l62.986 62.986v415.965l-63.424 63.424z" style="fill:none;fill-rule:nonzero;stroke:#b13425;stroke-width:18px" transform="translate(453.396 209.3)scale(1.33333)"/></g></svg>
            <div class="dropdown">
                <button name="brutal" class="dropbtn" data-bind="data">к4</button>
                <input name="brutal" type="text" data-bind="value" value="4" hidden/>
                <div class="dropdown-content">
                    <a class="approach-choice" data-choice="4" href="#">к4</a>
                    <a class="approach-choice" data-choice="6" href="#">к6</a>
                    <a class="approach-choice" data-choice="8" href="#">к8</a>
                    <a class="approach-choice" data-choice="10" href="#">к10</a>
                    <a class="approach-choice" data-choice="12" href="#">к12</a>
                </div>
            </div>
            <span class="approach-label">Брут.</span>
        </div>
        <div class="approach-container">
            <svg width="100%" height="100%" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:10;" viewBox="0 0 1366 1366" class="approach"><g id="Layer-1"><path d="M0-231.097V0h-470.429v-231.097l63.316 63.424h343.689z" style="fill:#fff;fill-rule:nonzero;stroke:#b13425;stroke-width:18px" transform="translate(996.21 1156.03)scale(1.33333)"/><path d="m0 542.375-63.424-63.424V62.986L-.438 0h344.457l62.986 62.986v415.965l-63.424 63.424z" style="fill:none;fill-rule:nonzero;stroke:#b13425;stroke-width:18px" transform="translate(453.396 209.3)scale(1.33333)"/></g></svg>
            <div class="dropdown">
                <button name="skillful" data-bind="data" class="dropbtn">к4</button>
                <input name="skillful" data-bind="value" type="text" value="4" hidden/>
                <div class="dropdown-content">
                    <a class="approach-choice" data-choice="4" href="#">к4</a>
                    <a class="approach-choice" data-choice="6" href="#">к6</a>
                    <a class="approach-choice" data-choice="8" href="#">к8</a>
                    <a class="approach-choice" data-choice="10" href="#">к10</a>
                    <a class="approach-choice" data-choice="12" href="#">к12</a>
                </div>
            </div>
            <span class="approach-label">Снор.</span>
        </div>
        <div class="approach-container">
            <svg width="100%" height="100%" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:10;" viewBox="0 0 1366 1366" class="approach"><g id="Layer-1"><path d="M0-231.097V0h-470.429v-231.097l63.316 63.424h343.689z" style="fill:#fff;fill-rule:nonzero;stroke:#b13425;stroke-width:18px" transform="translate(996.21 1156.03)scale(1.33333)"/><path d="m0 542.375-63.424-63.424V62.986L-.438 0h344.457l62.986 62.986v415.965l-63.424 63.424z" style="fill:none;fill-rule:nonzero;stroke:#b13425;stroke-width:18px" transform="translate(453.396 209.3)scale(1.33333)"/></g></svg>
            <div class="dropdown">
                <button name="smart" class="dropbtn" data-bind="data">к4</button>
                <input name="smart" data-bind="value" type="text" value="4" hidden/>
                <div class="dropdown-content">
                    <a class="approach-choice" data-choice="4" href="#">к4</a>
                    <a class="approach-choice" data-choice="6" href="#">к6</a>
                    <a class="approach-choice" data-choice="8" href="#">к8</a>
                    <a class="approach-choice" data-choice="10" href="#">к10</a>
                    <a class="approach-choice" data-choice="12" href="#">к12</a>
                </div>
            </div>
            <span class="approach-label">Мозг.</span>
        </div>
        <div class="approach-container">
            <svg width="100%" height="100%" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:10;" viewBox="0 0 1366 1366" class="approach"><g id="Layer-1"><path d="M0-231.097V0h-470.429v-231.097l63.316 63.424h343.689z" style="fill:#fff;fill-rule:nonzero;stroke:#b13425;stroke-width:18px" transform="translate(996.21 1156.03)scale(1.33333)"/><path d="m0 542.375-63.424-63.424V62.986L-.438 0h344.457l62.986 62.986v415.965l-63.424 63.424z" style="fill:none;fill-rule:nonzero;stroke:#b13425;stroke-width:18px" transform="translate(453.396 209.3)scale(1.33333)"/></g></svg>
            <div class="dropdown">
                <button name="charismatic" class="dropbtn" data-bind="data">к4</button>
                <input name="charismatic" data-bind="value" type="text" value="4" hidden/>
                <div class="dropdown-content">
                    <a class="approach-choice" data-choice="4" href="#">к4</a>
                    <a class="approach-choice" data-choice="6" href="#">к6</a>
                    <a class="approach-choice" data-choice="8" href="#">к8</a>
                    <a class="approach-choice" data-choice="10" href="#">к10</a>
                    <a class="approach-choice" data-choice="12" href="#">к12</a>
                </div>
            </div>
            <span class="approach-label">Хар.</span>
        </div>
    </div>
    <input type="submit">
</form>
<script>const elements={};function init(){const e=document.querySelectorAll("[data-bind]");for(let t=0;t<e.length;t++)elements[e[t].name]||(elements[e[t].name]=[]),elements[e[t].name].push(e[t])}function fill(e){for(const[t,a]of Object.entries(e))if(elements[t])for(let e=0;e<elements[t].length;e++)switch(elements[t][e].dataset.bind){case"value":elements[t][e].value=a;break;case"data":elements[t][e].firstChild.data=a;break;default:console.log(`some bullshit happened (data-bind = ${elements[t][e].dataset.bind})`)}}init(),fetch("/sheet_data?"+window.Telegram.WebApp.initData).then((async e=>fill(await e.json()))),document.querySelector("#sheet-form").addEventListener("submit",(e=>{e.preventDefault(),e.stopPropagation();let t=new FormData(e.target),a={};t.forEach(((e,t)=>a[t]=e)),fetch("/sheet_data",{method:"POST",body:JSON.stringify(a),headers:{"X-User-Data":window.Telegram.WebApp.initData}}).then((e=>{}))}));</script>
<script>const appChoices=document.querySelectorAll(".approach-choice");for(let e=0;e<appChoices.length;e++)appChoices[e].addEventListener("click",(e=>{const t=e.target.dataset.choice;e.currentTarget.parentElement.parentElement.querySelector(".dropbtn").firstChild.data="к"+t;e.currentTarget.parentElement.parentElement.querySelector("input").value="к"+t}));</script>
</body>
</html>